---
  - name: Testing
    hosts: VMs
    become: True
    tasks:
      - name: Ping all my VMs
        ansible.builtin.ping:
          
      - name: Install packages
        yum:
          name: nginx
          state: latest

      - name: Start nginx
        service:
          name: nginx
          state: started

      - name: Install Python3
        yum:
          name: Python3
          state: present

      - name: Verify Python3
        ansible.builtin.package:
          name: Python3
          state: present
        register: python_check

      - name: Stop nginx
        service:
          name: nginx
          state: stopped